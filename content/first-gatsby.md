---
title: "GatsbyJSでブログを作ってみた"
date: "2020-01-12 15:34:16"
description: "静的サイトジェネレータGatsbyJSを使ってブログを作成しました。気づいた点などを記録します。"
category: "技術"
tags : ["Gatsby"]
---

今回、GatsbyJSという「静的サイトジェネレータ」を使ってブログサイト（このサイト）を構築してみました。
元々WordPressで自作テーマづくりなどをしていたので、WordPress（動的サイト）と比較して感想をお伝えしていきたいと思います。

## 静的サイトジェネレータってなぁに

### 静的サイトと動的サイトの違い

Webサイトの生成方法は大きく分けると2つ。

1. 静的サイト
2. 動的サイト

違いは、表示する内容をサーバーで生成するかどうか。
動的サイトは、ユーザーがアクセスしてきた際にサーバー側でコードを生成する仕組み。
一方静的サイトはすでにあるコンテンツを表示するだけ。

なので、静的サイトは動的サイトに比べると表示速度が速い！…らしい。

動的サイトの代表格がWordPress。
サイトの情報はMySQL（データベース）で管理して、ユーザーがアクセスすると、PHPでよいしょーっとWebサイトを生成する仕組みですね。

## 静的サイトジェネレータは静的サイトのお悩みを解決するためのもの

静的サイトって速いんだ！じゃあ、静的サイトにしよう！…っては単純に行かないですよね。

HTMLをごりごり書いて静的サイトを作ろうとすると、いろんなお悩みにぶち当たります。

* ページ遷移どうしよう？
* カテゴリーが変わった場合は？
* 記事の更新方法どうするの？

ざっくりいうと、静的サイトに関わるお悩みを解決できるようにするよ！というのが静的サイトジェネレータ。

## GatsbyJSでできること

今回のサイト制作に使ったのは、[GatsbyJS](https://www.gatsbyjs.org/)という静的サイトジェネレータ。

npmを使ってインストールできます。

```shell
npm install -g gatsby-cli
```

細かいコマンドは公式サイトに載っているので割愛するとして、便利なコマンドが用意されていて、それを使って楽にWebサイトを作りましょうね～という感じ。

Reactベースなので、Reactが分かる人はすんなり入れるだろうな～という感じ。
正直Reactがわからないと構築には結構手間取るけど、スターターキットや、公式のチュートリアルも充実していて、あんまり凝ったサイトを作るのでなければコピペでもなんとかなる。

基本的な動作環境を作ってあげた後は、developコマンドを実行して開発環境を立ち上げる。

```shell
gatsby develop
```

開発環境を立ち上げると、ソースを変更するとリアルタイムで表示が変わって便利。

ローカルのソースをデータベース的に検索する機能　×　MarkdownをHTMLに変換する機能があって、ブログの記事投稿はこの機能の組み合わせで実現できる。

他にも便利なプラグインが用意されている。
例えばscss、sassをそのまま読込ができるプラグインなど。

プラグインは正直追いきれていないので、実装する都度記事にまとめていきたい。

## WordPressと比較すると

WordPressと比較したときのメリット、デメリットを書いていきます。

メリット

* ソースを自分で制御できるので、CSSフレームワークとの相性が良い
* HTMLに変換した後は確かに動作が早い
* マークダウンをそのまま記事として公開できる
* 基本ローカル環境で開発できるので、インターネット環境が整っていなくても開発しやすい

デメリット

* HTMLへの変換に時間がかかる
  * ページが増えれば増えるほど変換時間増すのでは？という懸念…
* JavaScriptの知識が必要になる
  * メリットになる人も多いと思いますが、普段全然JSいじらないので…
* CSSを外部ファイルとして読み込むとインラインで埋め込まれてレンダリングがブロックされる
  * おそらくこれも私がJS方式を理解しきれていないため……
* ソースを組んでいるときにHTMLの全体像が若干分かりにくい
  * 例えば`head`を初期状態でいじりにいけない。いじるためにはプラグイン入れる必要あり。

デメリットを見ていくと、JavaScriptとお友達になる必要がありますね…。

まだまだ実装しきれていない機能も多いため、少しずつ強化していきたいと思います。
この記事を書いてて感じたのはMarkdownで記事作成できるのやっぱり楽！ということ。
頑張ってJavaScript、そしてGatsbyとお友達になりたいです。
